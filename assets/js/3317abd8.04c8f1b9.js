"use strict";(self.webpackChunkdbt_osmosis=self.webpackChunkdbt_osmosis||[]).push([[80],{3905:(e,t,o)=>{o.d(t,{Zo:()=>c,kt:()=>f});var n=o(7294);function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function l(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function r(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?l(Object(o),!0).forEach((function(t){i(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function a(e,t){if(null==e)return{};var o,n,i=function(e,t){if(null==e)return{};var o,n,i={},l=Object.keys(e);for(n=0;n<l.length;n++)o=l[n],t.indexOf(o)>=0||(i[o]=e[o]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)o=l[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}var s=n.createContext({}),m=function(e){var t=n.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):r(r({},t),e)),o},c=function(e){var t=m(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var o=e.components,i=e.mdxType,l=e.originalType,s=e.parentName,c=a(e,["components","mdxType","originalType","parentName"]),p=m(o),u=i,f=p["".concat(s,".").concat(u)]||p[u]||d[u]||l;return o?n.createElement(f,r(r({ref:t},c),{},{components:o})):n.createElement(f,r({ref:t},c))}));function f(e,t){var o=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var l=o.length,r=new Array(l);r[0]=u;var a={};for(var s in t)hasOwnProperty.call(t,s)&&(a[s]=t[s]);a.originalType=e,a[p]="string"==typeof e?e:i,r[1]=a;for(var m=2;m<l;m++)r[m]=o[m];return n.createElement.apply(null,r)}return n.createElement.apply(null,o)}u.displayName="MDXCreateElement"},2803:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>l,metadata:()=>a,toc:()=>m});var n=o(7462),i=(o(7294),o(3905));const l={sidebar_position:4},r="Selection",a={unversionedId:"tutorial-yaml/selection",id:"tutorial-yaml/selection",title:"Selection",description:"Selecting models",source:"@site/docs/tutorial-yaml/selection.md",sourceDirName:"tutorial-yaml",slug:"/tutorial-yaml/selection",permalink:"/dbt-osmosis/docs/tutorial-yaml/selection",draft:!1,editUrl:"https://github.com/z3z1ma/dbt-osmosis/tree/main/docs/docs/tutorial-yaml/selection.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Inheritance",permalink:"/dbt-osmosis/docs/tutorial-yaml/inheritance"},next:{title:"Workflow",permalink:"/dbt-osmosis/docs/tutorial-yaml/workflow"}},s={},m=[{value:"Selecting models",id:"selecting-models",level:2},{value:"Positional selectors",id:"positional-selectors",level:3},{value:"<code>--fqn</code> flag",id:"--fqn-flag",level:3}],c={toc:m},p="wrapper";function d(e){let{components:t,...o}=e;return(0,i.kt)(p,(0,n.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"selection"},"Selection"),(0,i.kt)("h2",{id:"selecting-models"},"Selecting models"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"dbt-osmosis yaml")," commands have two methods to selecting files to execute on. "),(0,i.kt)("h3",{id:"positional-selectors"},"Positional selectors"),(0,i.kt)("p",null,"The first method is positional selectors. Positional selectors consist of all of the arguments that are not flags. For example, ",(0,i.kt)("inlineCode",{parentName:"p"},"dbt-osmosis yaml refactor models/staging")," would select all models in the ",(0,i.kt)("inlineCode",{parentName:"p"},"models/staging")," directory. ",(0,i.kt)("inlineCode",{parentName:"p"},"dbt-osmosis yaml refactor models/staging/base")," would select all models in the ",(0,i.kt)("inlineCode",{parentName:"p"},"models/staging/base")," directory. You can use globs if they are supported by your shell. For example, ",(0,i.kt)("inlineCode",{parentName:"p"},"dbt-osmosis yaml refactor marts/*.sql")," would select all models in the ",(0,i.kt)("inlineCode",{parentName:"p"},"models/marts")," directory but not its subdirectories. ",(0,i.kt)("inlineCode",{parentName:"p"},"dbt-osmosis yaml refactor marts/**/*.sql")," would select all models in the ",(0,i.kt)("inlineCode",{parentName:"p"},"models/marts")," directory and its subdirectories via a recursive glob. Absolute paths are also supported."),(0,i.kt)("p",null,"Positional selectors will also short circuit if the positional selector matches a node name exactly. For example, ",(0,i.kt)("inlineCode",{parentName:"p"},"dbt-osmosis yaml refactor stg_customers")," would select ",(0,i.kt)("inlineCode",{parentName:"p"},"models/staging/stg_customers.sql")," if it exists. This is useful as a convenience to run a specific model since all nodes have unique names. File paths are more explicit but you can use both if you want."),(0,i.kt)("p",null,"This should all be fairly intuitive. This is the preferred method of selecting models."),(0,i.kt)("h3",{id:"--fqn-flag"},(0,i.kt)("inlineCode",{parentName:"h3"},"--fqn")," flag"),(0,i.kt)("admonition",{title:"Caution",type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"This may be deprecated in the future. Please use model positional selectors instead.")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"--fqn")," flag allows you to specify a list of fully qualified names (FQNs) to select models. This is a fairly explicit way to select models. A dbt fqn is comprised of segments. Each segment corresponds to a unit of information."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The first segment is the project name."),(0,i.kt)("li",{parentName:"ul"},"The second segment is the resource type.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"model")," for models"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"source")," for sources"))),(0,i.kt)("li",{parentName:"ul"},"The following segments are the path to the resource from the /models directory.")),(0,i.kt)("p",null,"In our implementation of the ",(0,i.kt)("inlineCode",{parentName:"p"},"fqn")," selector, we omit the project name and resource type. This is because we assert that the user is only working with models in the current project (ie not packages) and that the user is only working with models and sources as that is all that is supported by the ",(0,i.kt)("inlineCode",{parentName:"p"},"dbt-osmosis yaml")," commands."),(0,i.kt)("admonition",{title:"Tip",type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"When you run ",(0,i.kt)("inlineCode",{parentName:"p"},"dbt ls")," you will see the fully qualified name of each model. If you omit the project name and resource type, you can copy and paste the FQN from the ",(0,i.kt)("inlineCode",{parentName:"p"},"dbt ls")," output.")),(0,i.kt)("p",null,"So for example, using ",(0,i.kt)("inlineCode",{parentName:"p"},"--fqn=staging.customers")," in the ",(0,i.kt)("inlineCode",{parentName:"p"},"my_project")," project context would select ",(0,i.kt)("inlineCode",{parentName:"p"},"my_project.model.staging.customers"),". The utility of this feature is that you can use only a few segments of the FQN to select a large number of models. For example, ",(0,i.kt)("inlineCode",{parentName:"p"},"--fqn=staging")," would select all models in the ",(0,i.kt)("inlineCode",{parentName:"p"},"staging")," directory. ",(0,i.kt)("inlineCode",{parentName:"p"},"--fqn=staging.base")," would select all models in the ",(0,i.kt)("inlineCode",{parentName:"p"},"staging/base")," directory."))}d.isMDXComponent=!0}}]);